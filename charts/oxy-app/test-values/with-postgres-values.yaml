# Integration test with PostgreSQL enabled
nameOverride: "oxy-test-postgres"
fullnameOverride: "oxy-test-postgres"

app:
  image: "ghcr.io/oxy-hq/oxy"
  imageTag: "0.2.28"
  imagePullPolicy: "IfNotPresent"

replicaCount: 1

service:
  type: ClusterIP
  port: 80
  targetPort: 80

# Enable PostgreSQL dependency
database:
  postgres:
    enabled: true

# Configure PostgreSQL for testing
postgresql:
  image:
    registry: docker.io
    repository: bitnamilegacy/postgresql
    tag: 16.4.0-debian-12-r13  # Lock to stable PostgreSQL 16.x version
  auth:
    username: testuser
    password: testpass
    database: testdb
  primary:
    persistence:
      enabled: false  # Disable persistence for CI


resources:
  limits:
    cpu: 100m
    memory: 128Mi
  requests:
    cpu: 50m
    memory: 64Mi